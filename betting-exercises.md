Betting exercises
=================

1 Price, stake, back, lay, turnover, PnL, RoI
---------------------------------------------

Please read:

* [Understanding betting odds.](https://www.gamblingsites.com/sports-betting/introduction/understanding-odds/)
* [Back vs Lay Odds Explained.](https://www.matchbook.com/page/getting_started/back-v-lay/)

Please note:

* *Stake* always refers to the backer's stake (never the layer's liability).
* *Turnover* is the total stake (backers' stakes, not the layers' liabilities) of your bets.
* *Profit and loss (PnL)* is the total money that you won or lost (excluding the stake when you backed and won or laid and lost).
* *Return on investment (RoI)* is PnL / turnover * 100%.


### 1.1

You back a horse to win with £100 stake at price 4.0 (i.e. odds of 3 to 1).

Calculate your turnover, PnL and RoI for the outcomes:

* The horse wins.

Potential return if the horse wins = 4x £100 = £400  
Potential profit if win = 4 x £100 - stake = £300 

Turnover is £100 at stake.

PnL is £300 profit. 

RoI is (£300/£100)% = 300% (you made a 300% profit on your stake).

* The horse loses. 

Turnover is £100 at stake. 

PnL is -£100. 

RoI is (-£100/£100)% = -100% (you lose 100% of your stake!) 


### 1.2

You lay a horse to win with £100 stake at price 4.0.

Excluding your bet in 1.1, calculate your turnover, PnL and RoI for the outcomes:

Potential liability on the bet if the horse wins = 4 x £100 - backer stake = £300 

* The horse wins. 

Turnover is £100 at stake.

PnL is -£300 loss. 

RoI is (-£300/£100)% = -300% (you made a 300% loss on your stake!) 

* The horse loses. 

Turnover is £100 at stake.

PnL is £100 profit. 

RoI is (£100/£100)% = 100% (you won 100% of your stake) 

### 1.3

What is the relation between backing and laying?

Laying is the reverse of placing a back bet - you back an outcome you think will win, while you lay an outcome you believe will lose.

When laying you are effectively playing the role of a traditional bookmaker, by offering a backer odds on a particular result happening. When placing a lay bet you are betting for an outcome not to happen. If that result happens, you pay them. If it doesn't, you receive the backer's stake.

2 Expected value
----------------

Please read:

* [How to calculate expected value.](https://www.pinnacle.com/en/betting-articles/betting-strategy/how-to-calculate-expected-value)
* [What is value betting?](https://www.bettingexpert.com/academy/betting-fundamentals/what-is-value-betting)

Please note:

* *EV* is expected value.
* *Expected RoI* is EV / turnover * 100%.


### 2.1

An amateur gambler wants to back a horse to win with £100 stake. They believe that the horse has a 25% chance of winning.

Calculate the EV and expected RoI if the price is:

* 2.0.
* 3.0.
* 4.0.
* 5.0.
* 6.0.

Turnover is £100 at stake at price 2.0   
Potential return if win = 2x £100 = £200   
Potential profit if win = 2x £100 - stake = £100   
Potential liability on the bet = £100 (stake)   
EV = (0.25 x £100) – (0.75 x £100) = £-50   
Expected RoI = (£-50 / £100)% = -50% 

Turnover is £100 at stake at price 3.0   
Potential return if win = 3x £100 = £300   
Potential profit if win = 3x £100 - stake = £200   
Potential liability on the bet = £100 (stake)   
EV = (0.25 x £200) – (0.75 x £100) = £-25   
Expected RoI = (£-25 / £100)% = -25% 

Turnover is £100 at stake at price 4.0   
Potential return if win = 4x £100 = £400   
Potential profit if win = 4x £100 - stake = £300   
Potential liability on the bet = £100 (stake)   
EV = (0.25 x £300) – (0.75 x £100) = £0   
Expected RoI = (£0 / £100)% = 0% 

Turnover is £100 at stake at price 5.0   
Potential return if win = 5x £100 = £500   
Potential profit if win = 5x £100 - stake = £400   
Potential liability on the bet = £100 (stake)   
EV = (0.25 x £400) – (0.75 x £100) = £25   
Expected RoI = (£25 / £100)% = 25%

Turnover is £100 at stake at price 6.0   
Potential return if win = 6x £100 = £600   
Potential profit if win = 6x £100 - stake = £500   
Potential liability on the bet = £100 (stake)   
EV = (0.25 x £500) – (0.75 x £100) = £50   
Expected RoI = (£50 / £100)% = 50% 


Which of these prices is the best price for the gambler? Why is it the best?

Best price for the gambler is 6.0 because it maximises the expected winnings (best EV/Expected RoI with a £100 stake).

### 2.2

An amateur gambler wants to lay a horse to win with £100 stake. They believe that the horse has a 25% chance of winning.

Excluding the bet in 2.1, calculate the EV and expected RoI if the price is:

* 2.0.
* 3.0.
* 4.0.
* 5.0.
* 6.0.

Turnover is £100 at stake at price 2.0   
Potential liability on the bet = 2x £100 - stake = £100   
EV = (0.75 x £100) – (0.25 x £100) = £50   
Expected RoI = (£50 / £100)% = 50%

Turnover is £100 at stake at price 3.0   
Potential liability on the bet = 3x £100 - stake = £200   
EV = (0.75 x £100) – (0.25 x £200) = £25   
Expected RoI = (£25 / £100)% =  25%   

Turnover is £100 at stake at price 4.0   
Potential liability on the bet = 4x £100 - stake = £300   
EV = (0.75 x £100) – (0.25 x £300) = £0   
Expected RoI = (£0 / £100)% = 0% 

Turnover is £100 at stake at price 5.0   
Potential liability on the bet = 5x £100 - stake = £400   
EV = (0.75 x £100) – (0.25 x £400) = £-25   
Expected oI = (£-25 / £100)% = -25%   

Turnover is £100 at stake at price 6.0   
Potential liability on the bet = 2x £100 - stake = £500   
EV = (0.75 x £100) – (0.25 x £500) = £-50   
Expected RoI = (£-50 / £100)% = -50%   

Which of these prices is the best price for the gambler? Why is it the best?

Best price for the gambler is 2.0 because it maximises the expected winnings (best EV/Expected RoI with a £100 stake).

### 2.3

What is the *fair price* for this horse? Why is it fair?

The fair price is one for which the expected value of the payoff is zero.   
For this horse the fair price is 4.0.
It is a fair price because in the long run, it is expected that if you made this bet over and over again in one way or the other, you would expect to break even. 

For example, suppose a backer is offered to be paid £2 if a fair coin lands heads, but must pay £1 to play.  
Expected payoff is −£1 + £0×P(tails) + £2×P(heads) = −£1 + £2×50% = £0.   
On the other side for the bookmaker, "heads" could win but "on average" the payout would be covered by their profit made on the losing "tails" bets.  
Expected payoff is +£1 - £2×P(heads) = +£1 - £2×50% = £0  
At that price the game is fair both for the punter and the bookmaker.

3 Kelly criterion
-----------------

Please read:

* [Staking: One method to improve your betting.](https://www.pinnacle.com/en/betting-articles/betting-strategy/staking-one-method-to-improve-your-betting)
* [How to use Kelly criterion for betting.](https://www.pinnacle.com/en/betting-articles/betting-strategy/how-to-use-kelly-criterion-for-betting)
* [How to manage your betting bankroll.](https://www.bettingexpert.com/how-to/manage-your-betting-bankroll)
* [How to calculate the Kelly criterion.](https://www.bettingexpert.com/how-to/calculate-the-kelly-criterion)

You may want to read:

* [Kelly criterion in detail.](http://www.elem.com/~btilly/kelly-criterion/)


### 3.1

A professional gambler wants to bet on a horse that they believe has a 25% chance of winning. The gambler has a £100,000 bank and bets full Kelly.

Calculate the side (back or lay), stake, EV and expected RoI of the gambler's bet if the price is:

* 2.0.
* 3.0.
* 4.0.
* 5.0.
* 6.0.

1. odds of 2.00 to win.

The odds of 2.00 on offer imply a probability of the horse winning at 50%.   
Implied Probability = 1 / 2.00 is .50   
Our own probability of the horse winning is 25% => lay bet   
We calculate the value (overlay): (25% multiplied by 2.00) - 100% = -50%.   
Betting full Kelly the stake should be: bankroll * (overlay/(odds - 1))   
100000 * (0.5/(2 - 1 )) 

Full Lay Kelly = [( 0.75 - 0.25 * (2.00 - 1)] / (2.00 - 1)   
[0.75 - 0.25 * 1] / 1   
[0.75 - 0.25] / 1   
0.5 / 1   
0.5, i.e. the stake should be 50% of the bank, i.e £50,000   
EV = (0.75 x £50,000) - (0.25 x £50,000) = £37,500 - £12,500 = £25,000   
Expected RoI = ( £25,000 / £50,000 )% = 50%   

2. odds of 3.00 to win.

The odds of 3.00 on offer imply a probability of the horse winning at 1/3.     
Implied Probability = 1 / 3    
Our own probability of the horse winning is 25% => lay bet   
We calculate the value (overlay): (25% multiplied by 3.00) - 100% = -25%.   
Betting full Kelly the stake should be: bankroll * (overlay/(odds - 1))   
100000 * (-0.25/(3 - 1 ))   

Full Lay Kelly = [[(0.75 - 0.25 * (3.00 - 1)] / (3.00 - 1)   
[(0.75 - 0.25 * 2.00)] / 2   
[0.75 - 0.5] / 2   
0.25 / 2   
0.125, i.e. the stake should be 12.5% of the bank, i.e £12,500   
EV = (0.75 x £12,500) - (0.25 x (2 x £12,500) = £9,375 - £6,250 = £3,125   
Expected RoI = ( £3,125 / £12,500 )% = 25%  

3. odds of 4.00 to win.

The odds of 4.00 on offer imply a probability of the horse winning at 25%.   Implied Probability = 1 / 4.00 is .25  
Our own probability of the horse winning is 25%  
We calculate the value: (25% multiplied by 4.00) - 100% = 0%.  
Betting full Kelly the stake should be: bankroll * (overlay/(odds - 1))   
100000 * (0/(4 - 1 ))  

Full Reverse Kelly = [(0.25 * 4.00) - 1] / (4.00 - 1)   
[(0.25 * 4.00) - 1] / 3   
[1 - 1] / 3   
0 / 1   
0, i.e. the stake should be 0% of the bank.   
EV = 0   
Expected RoI = 0  

4. odds of 5.00 to win.  

The odds of 5.00 on offer imply a probability of the horse winning at 20%.   Implied Probability = 1 / 5.00 is .20   
Our own probability of the horse winning is 25% => back bet    
We calculate the value (overlay): (25% multiplied by 5.00) - 100% = 25%.   
Betting full Kelly the stake should be: bankroll * (overlay/(odds - 1))     
100000 * (0.25/(5 - 1 ))  

Full Reverse Kelly = [(0.25 * 5.00) - 1] / (5.00 - 1)   
[(0.25 * 5.00) - 1] / 4   
[1.25 - 1] / 4   
0.25 / 1   
0.25, i.e. the stake should be 25% of the bank, i.e £25,000   
EV = (0.25 x (4 x £25,000) – (0.75 x £25,000) = £25,000 - £18,750 = £6,250   
Expected RoI = ( £6,250 / £25,000)% = 25%  

5. odds of 6.00 to win.

The odds of 6.00 on offer imply a probability of the horse winning at 1/6  
Implied Probability = 1 / 6   
Our own probability of the horse winning is 25% => back bet     
We calculate the value: (25% multiplied by 6.00) - 100% = 50%.   
Betting full Kelly the stake should be: bankroll * (overlay/(odds - 1))    
100000 * (0.5/(6 - 1 )) 

Full Reverse Kelly = [(0.25 * 6.00) - 1] / (6.00 - 1)   
[(0.25 * 6.00) - 1] / 5   
[1.5 - 1] / 5   
0.5 / 1   
0.5, i.e. the stake should be 50% of the bank, i.e £50,000   
EV = (0.25 x (5 x £50,000) – (0.75 x £50,000) = £62,500 - £37,500 = £25,000   
Expected RoI = ( £25,000 / £50,000 )% = 50%   


### 3.2

A bookmaker accepts backers’ stakes up to 0.2% of the bookmaker’s bank. A horse has a fair price of 60.0.

What is the longest price that the bookmaker can offer to backers without the bookmaker expecting to lose money?

If Kelly criterion tells us how much to back bet based on how much of an edge we have, we can reverse the logic (and the equation) asking ourselves how much edge a bookmaker needs when taking bets up to .2% of their bankroll.

$$
f = (q - p × (d - 1)) / (d - 1) 
$$

where:

- f = fraction of the current bank to wager.  
- d = decimal betting odds.
- p = perceived probability of selection winning.
- q = perceived probability of selection losing, which is 1 – p.

The odds of 60.00 on offer imply a probability of the horse winning at 1/60.

0.002 = (59/60 - 1/60d + 1/60)) / (d - 1)  
(59/60 - 1/60d + 1/60)) = 0.002d - 0.002   
0.998 = (1/60d + 0.002d)  
0.998 / ((1/60) + 0.002)) = 53.4642857143 

4 Closed position
-----------------

Please read:

* [How to hedge your bets.](https://help.smarkets.com/hc/en-gb/articles/115001396171-How-to-hedge-your-bets)
* [How to calculate a hedge bet.](https://help.smarkets.com/hc/en-gb/articles/115001431011-How-to-calculate-a-hedge-bet)

### 4.1

A gambler opened a position by backing a horse to win with £100 stake when the price was 6.0. The price has shortened to 5.0, which the gambler believes to be the fair price.

Calculate the gambler's turnover, PnL and RoI for the outcomes:

* The horse wins.
* The horse loses.

Calculate the gambler's EV and expected RoI.

| Outcome         | Turnover at stake | PnL                                   | RoI                  |
| --------------- | ----------------- | ------------------------------------- | -------------------- |
| The horse wins  | £100              | £100 x 6 - £100 = £600 - £100 = +£500 | +£500 / £100 = 500%  |
| The horse loses | £100              | -£100                                 | -£100 / £100 = -100% |

Implied Probability = 1/5 is .20   
EV = (0.2 x (5 x £100) - (0.8 x £100)) = 0.2 x £500 - 0.8 x £100 = £100 - £80 = £20   
Expected RoI = ( £20 / £100)% = 20%   

### 4.2

The gambler closes the position by laying the horse to win with £120 stake at price 5.0.

Including the bet in 4.1, calculate the gambler's turnover, PnL and RoI for the outcomes:

* The horse wins.
* The horse loses.

Calculate the gambler's EV and expected RoI.

| Outcome         | Turnover at stake | back bet                              | lay bet                               | PnL  | RoI               |
| --------------- | ----------------- | ------------------------------------- | ------------------------------------- | ---- | ----------------- |
| The horse wins  | £100              | £100 x 6 - £100 = £600 - £100 = +£500 | -£120 x ( 5 - 1 ) = -£120 x 4 = -£480 | +£20 | +£20 / £100 = 20% |
| The horse loses | £100              | -£100                                 | +£120                                 | +£20 | +£20 / £100 = 20% |

Implied Probability = 1/5 is .20   
EV = (0.2 x (5 x £100) - (0.8 x £100) + 0.8 x (£120) - 0.2 x (4 x £120)) = £100 - £80 + £96 - £96 = £20   
Expected RoI = ( £20 / £100)% = 20% 

### 4.3

* What is the same about the open and closed positions? What is different?

Same Expected Value (£20) but we lock in a guaranteed £20 profit regardless of the result. However potential £500 profit / 500% RoI are reduced significantly. 

* What are the advantages and disadvantages of closing a position?

One benefit of closing a position is the opportunity to cut your loss and minimise your potential exposure if the odds have moved in the opposite direction. For example, rather than let your back bet ride and risk the exposure of your stake, you could decide to hedge your bet by laying the outcome.
Another benefit of closing a position is that you can secure a guaranteed profit. In our case we close our position and lock in a guaranteed £20 profit regardless of the result. 
Obviously the disadvantage is that you will give up on your initial belief for a greater profit and therefore closing your position will reduce your potential ROI. 

* How did the gambler calculate the stake to close the position?

Hedging calculation = (back price * back stake) / current lay odds = (6 x 100) / 5 = £120 